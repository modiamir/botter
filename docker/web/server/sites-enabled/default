server {
    server_name botter.telexiapp.ir botter.localhost;
    index index.php
    listen 80;
    root /var/www;

    location / {
        # First attempt to serve request as file, then
        # as directory, then fall back to index.html
        try_files $uri $uri/ /index.php?q=$uri&$args;
    }

    location ~ [^/]\.php(/|$) {
        fastcgi_split_path_info ^(.+?\.php)(/.*)$;
        if (!-f $document_root$fastcgi_script_name) {
            return 404;
        }

        # Mitigate https://httpoxy.org/ vulnerabilities
        fastcgi_param HTTP_PROXY "";

        fastcgi_pass unix:/run/phpfpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
    }

    error_log /var/log/nginx/bot_error.log;
    access_log /var/log/nginx/bot_access.log;
}

